<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <title>LionBefrienders</title>
    <link rel="shortcut icon" href="/assets/favicon.ico">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/css/bootstrap.min.css">
    <title>Welcome</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
       <!-- ✅ Showdown.js for Markdown Conversion -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <iframe id="fontWidget" src="font_widget.html" style="position: fixed; bottom: 20px; right: 20px; border: none;"></iframe>
    <style>


        .jwt-token {
            word-wrap: break-word;
            font-size: 16px;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 10px;
        }
        * {
            font-family: 'Poppins';
            margin: 0;
            padding: 0;
            scroll-padding-top: 1rem;
            scroll-behavior: smooth;
            list-style: none;
            text-decoration: none;
            box-sizing: border-box;
        }

        /* -------------------- Global variable for the colors -------------------- */
        :root {
            --main-color: red;
            --text-color: black;
            --bg-color: #fff;
            --yellow: #f9d806;
            --light-yellow: #ffee80;
            --black: #130f40;
            --light-color: #666;
            --box-shadow: 0 .5rem 1rem rgba(0,0,0,.1);
            --border: .1rem solid rgba(0,0,0,.1);
            --color-primary: #009579;
            --color-primary-dark: #007f67;
            --color-secondary: #252c6a;
            --color-error: #cc3333;
            --color-success: #4bb544;
            --pink: #e84393;
            --border-radius: 4px;
            --green: #27ae60;
            --dark-color: #219150;
            --black: #444;
            --light-color: #666;
            --border-hover: .1rem solid var(--black);
        }

        html {
            font-size: 86.5%;
            scroll-behavior: smooth;
            scroll-padding-top: 6rem;
            overflow-x: hidden;
        }

        section {
            padding: 2rem 9%;
        }

        img {
            width: 100%;
        }

        body {
            color: var(--text-color);
        }

        .container {
            margin-left: auto;
            margin-right: auto;
        }

        .heading {
            text-align: center;
            font-size: 4rem;
            color: #333;
            padding: 1rem;
            margin: 2rem 0;
            background: rgba(255, 51, 153,.05);
        }

            .heading span {
                color: var(--pink);
            }

        header {
            display: block;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }

            header.shadow {
                background: black;
                box-shadow: 2px 4px 4px rgb(15 54 55 /20%);
                transition: 1.5s;
            }
        /* -------------------- END -------------------- */

        /* -------------------- Nav bar -------------------- */
        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 35px;
        }

        #menu-icon {
            font-size: 24px;
            cursor: pointer;
            color: white;
            display: none;
        }


        .logo {
            font-size: 3.2rem;
            font-weight: 700;
            color: white;
        }

            .logo span {
                color: var(--main-color);
            }

        .navbar {
            display: flex;
            column-gap: 2rem;
        }

            .navbar a {
                color: black;
                font-size: 1.2rem;
                text-transform: uppercase;
                font-weight: 500;
            }

                .navbar a:hover,
                .navbar .active {
                    color: var(--main-color);
                    border-bottom: 3px solid var(--main-color);
                }
        /* -------------------- END -------------------- */
        .login-register {
            text-align: center;
            margin-top: 20px;
        }

        .login-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #ffffff;
            border: 1px solid #ccc;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: none;
        }

            .login-popup h2 {
                margin-top: 0;
                margin-bottom: 20px;
            }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }

        /* -------------------- Homepage Banner -------------------- */
        .home {
            margin: auto;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            background: url(https://images.pexels.com/photos/3791664/pexels-photo-3791664.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&dpr=1) ;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center left;
        }

        .home-text {
            padding-left: 30px;
            color: whitesmoke;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 1.0); /* White shadow with alpha value 0.8 */
            font-weight: bold;
            /*transform: scale(1.1);*/
        }

        .hometext h1 {
            font-size: 3.4rem;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 1.0); /* Added text-shadow */
        }

        .home-text p {
            font-size: 1.3rem;
            font-weight: 800;
            margin: 0.5rem 0 1.2rem;
            color: white;
            z-index: 1;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 1.0); /* Added text-shadow */
        }
        /* -------------------- END -------------------- */


        /* -------------------- Login button -------------------- */
        .btn:hover {
            background: var(--yellow);
        }

        /* Login form container */
        #login-btn .btn {
            margin-top: 0;
            text-shadow: none;
        }

        #login-btn i {
            display: none;
            font-size: 2.5rem;
            color: lightyellow;
            text-shadow: none;
        }

        .btn {
            display: inline-block;
            margin-top: 0px;
            padding: .8rem 3rem;
            background: white;
            color: black;
            cursor: pointer;
            font-size: 15px;
            border-radius: .5rem;
            font-weight: 500;
            text-align: center;
            text-shadow: none;
        }

        .header.active {
            padding: 2rem 9%;
            box-shadow: var(--box-shadow);
        }

        .loginAlert {
            width: 100%;
            padding: 1rem 2rem;
            font-weight: bold;
            font-size: 1.1rem;
            color: #ffffff;
            border: none;
            border-radius: var(--border-radius);
            outline: none;
            cursor: pointer;
            background: green;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        /* -------------------- END -------------------- */

        #menu-btn {
            font-size: 2.5rem;
            color: var(--light-color);
            display: none;
        }


        /* -------------------- END -------------------- */

        .btn {
            display: inline-block;
            margin-top: 0px;
            padding: .8rem 3rem;
            background: white;
            color: black;
            cursor: pointer;
            font-size: 15px;
            border-radius: .5rem;
            font-weight: 500;
            text-align: center;
        }

        #menu-btn {
            font-size: 2.5rem;
            color: var(--light-color);
            display: none;
        }

        .btnss {
            display: inline-block;
            margin-top: 0px;
            padding: .8rem 3rem;
            background: var(--green);
            color: black;
            cursor: pointer;
            font-size: 15px;
            border-radius: .5rem;
            font-weight: 500;
            text-align: center;
        }

            .btnss:hover {
                background: var(--color-primary-dark);
            }

        .btn:hover {
            background: turquoise;
        }

        .btns {
            display: inline-block;
            margin-top: 1rem;
            border-radius: 5rem;
            background: #333;
            color: #fff;
            padding: .6rem 2.5rem;
            cursor: pointer;
            font-size: 1.3rem;
        }

            .btns:hover {
                background: var(--pink);
            }
        /* -------------------- About Us -------------------- */
        .about .row {
            display: flex;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
            padding: 2rem 0;
            padding-bottom: 3rem;
        }

            .about .row .video-container {
                flex: 1 1 40rem;
                position: relative;
            }

                .about .row .video-container video {
                    width: 100%;
                    border: 1.5rem solid var(--black);
                    border-radius: 1rem;
                    box-shadow: 0 .5rem 1rem rgba(0,0,0,.1);
                    height: 100%;
                    object-fit: cover;
                }

                .about .row .video-container h3 {
                    position: absolute;
                    top: 50%;
                    transform: translateY(200%);
                    font-size: 2rem;
                    background: #fff;
                    width: 100%;
                    padding: 0.4rem 0.8rem;
                    text-align: center;
                    mix-blend-mode: screen;
                }

            .about .row .content {
                flex: 1 1 40rem;
            }

                .about .row .content h3 {
                    font-size: 2.5rem;
                    color: #333;
                }

                .about .row .content p {
                    font-size: 1.2rem;
                    color: #999;
                    padding: .5rem 0;
                    padding-top: 1rem;
                    line-height: 1.5;
                }
        /* -------------------- END -------------------- */
        /* -------------------- Subscribe page -------------------- */
        .newsletter {
            background: url(https://images.pexels.com/photos/6646917/pexels-photo-6646917.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&dpr=1) no-repeat;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

            .newsletter form {
                max-width: 35rem;
                margin-left: auto;
                text-align: center;
                padding: 3rem 0;
            }

                .newsletter form h3 {
                    font-size: 1.8rem;
                    color: #fff;
                    padding-bottom: .4rem;
                    font-weight: normal;
                }

                .newsletter form .box {
                    width: 100%;
                    margin: .7rem 0;
                    padding: 1rem 1.2rem;
                    font-size: 1.2rem;
                    color: var(--black);
                    border-radius: .9rem;
                    text-transform: none;
                }
        /* -------------------- END -------------------- */
        /* -------------------- Contact us page -------------------- */
        .contact .row {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

            .contact .row .map {
                flex: 1 1 42rem;
                width: 100%;
                padding: 2rem;
                box-shadow: var(--box-shadow);
                border: var(--border);
                border-radius: .5rem;
                height: 50rem;
            }

            .contact .row form {
                padding: 2rem;
                flex: 1 1 42rem;
                box-shadow: var(--box-shadow);
                border: var(--border);
                text-align: center;
                border-radius: .5rem;
            }

                .contact .row form h3 {
                    font-size: 3rem;
                    color: var(--black);
                    padding-bottom: 1rem;
                }

                .contact .row form .box {
                    width: 100%;
                    border-radius: .5rem;
                    padding: 1rem 1.2rem;
                    font-size: 1.6rem;
                    text-transform: none;
                    border: var(--border);
                    margin: .7rem 0;
                }

                .contact .row form textarea {
                    height: 15rem;
                    resize: none;
                }

        .contactheadings {
            padding-bottom: 2rem;
            text-align: center;
            font-size: 4.5rem;
            color: var(--black);
        }
        /* -------------------- END -------------------- */
        /* -------------------- Footer -------------------- */
        .footer .box-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

            .footer .box-container .box {
                flex: 1 1 25rem;
            }

                .footer .box-container .box h3 {
                    color: #333;
                    font-size: 2.5rem;
                    padding: 1rem 0;
                }

                .footer .box-container .box a {
                    display: block;
                    color: #666;
                    font-size: 1.5rem;
                    padding: 1rem 0;
                }

                    .footer .box-container .box a:hover {
                        color: var(--pink);
                        text-decoration: underline;
                    }

                .footer .box-container .box img {
                    margin-top: 1rem;
                    width: 60%;
                }

        .inner-footer {
            margin: 0;
            padding: 0;
            background-color: black;
        }

        .social-links {
            display: flex;
        }

            .social-links ul {
                padding: 10px;
                display: flex;
                width: 400px;
                height: 80px;
                margin: auto;
            }

        .social-items {
            list-style: none;
        }

            .social-items a {
                padding: 10px 30px;
                font-size: 40px;
                color: white;
            }

                .social-items a:hover {
                    color: red;
                }

        .outer-footer {
            padding: 15px;
            text-align: center;
            color: white;
            font-size: 18px;
            background-color: #191919;
        }


        /* -------------------- END -------------------- */

        @media (max-width:1280px){
    html{
        font-size: 55%;
    }
    header{
        padding:2rem;
    }
    section{
        padding:2rem;
    }
    .home{
        background-position: left;
    }
}
@media (max-width: 1080px ) {
    .container {
        margin-left: 1rem;
        margin-right: 1rem;
    }
}



@media (max-width: 991px) {
    .nav {
        padding: 15px 20px;
    }
    section{
        padding: 3rem 0 1rem;
    }
    .home.text {
        padding-left: 2rem;
    }
    .home.text h1{
        font-size: 2.1rem;
    }

}

@media (max-width: 968px){
    .nav {
        padding: 10px 0;
    }
    #menu-icon {
        display: initial;
    }
    .navbar {
        position: absolute;
        top: 100%;
        right: 0;
        left: 0;
        display: flex;
        flex-direction: column;
        background: black;
        row-gap: 0.5rem;
        text-align: center;
        box-shadow: 4px 4px 20px rgb(15 54 55 /20%);
        clip-path: circle(0% at 0% 0%);
        transition: 0.6s;
    }
    .navbar a {
        display: block;
        padding: 15px;
    }
    .navbar a:hover,
    .navbar.active{
        border-bottom: none;
        background: black;
        color: var(--bg-color);
    }
    .navbar.active{
        clip-path: circle(144% at 0% 0%);
    }
    .blog-container .box {
        padding: 4px;
    }

}

@media (max-width: 360px) {
    .home {
        min-height: 500px;
    }
    .home-text h1{
        font-size: 2rem;
    }
    .home-text p br{
        display: contents;
    }
}

@media (max-width: 968px) {


    .section-3-wrapper{
        flex-direction: column;

    }

    .feedback{
        width: 350px;
        height: 150px;
        margin-top: 10px;
    }
    .feedback-desc{
        width: 350px;
        height: 140px;
        font-size: 9.5px;
        margin-right: 0px;
        

    }
    .feedback-desc .far{

        font-size: 25px;
    }
}



@media (max-width:450px){
    html{
        font-size: 50%;
    }
    .heading{
        font-size: 3rem;
    }

}

.custom-blue-btn {
        background-color: #007bff; /* Your desired blue */
        border-color: #007bff;
        color: white;
    }

    .custom-blue-btn:hover {
        background-color: #0056b3; /* Darker blue for hover effect */
        border-color: #0056b3;
    }

    .custom-blue-btn:focus,
    .custom-blue-btn:active {
        box-shadow: none; /* Remove focus outline if you don't like it */
    }


/* Background */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');

    /* ✅ Restore Clean Background */
    body {
        background-color: #f5f5f5;
        font-family: 'Inter', sans-serif;
    }

    /* ✅ Chatbox with Style */
    .chat-container {
        max-width: 550px;
        margin: 50px auto;
        padding: 15px;
        border-radius: 15px;
        background-color: white;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        text-align: center;
        transition: transform 0.2s ease-in-out;
    }

    /* ✅ Chatbox Styling */
    #chatbox {
        display: flex;
        flex-direction: column;
        height: 450px;
        overflow-y: auto;
        border: none;
        padding: 10px;
        background: white;
        border-radius: 10px;
    }

    /* ✅ Smooth Animations for Chat Bubbles */
    .message {
        max-width: 80%;
        padding: 12px;
        border-radius: 12px;
        margin-bottom: 8px;
        font-size: 16px;
        line-height: 1.7;
        font-weight: 400;
        animation: fadeIn 0.3s ease-in-out;
    }

    /* ✅ Fade-in Animation */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* ✅ User Message */
    .user {
        background: #007bff;
        color: white;
        align-self: flex-end;
        border-radius: 12px 12px 0 12px;
    }

    /* ✅ Bot Message */
    .bot {
        background: #f7f7f8;
        color: black;
        align-self: flex-start;
        border-radius: 12px 12px 12px 0;
        font-weight: 500;
    }

    /* ✅ Input Box */
    .input-container {
        display: flex;
        padding: 10px;
        background: white;
        border-top: 1px solid #ddd;
        border-radius: 0 0 10px 10px;
    }

    #userInput {
        flex-grow: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 10px;
        outline: none;
        font-size: 16px;
        font-family: 'Inter', sans-serif;
    }

    #sendBtn {
        padding: 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        margin-left: 5px;
        transition: background 0.2s ease-in-out;
    }

    #sendBtn:hover {
        background-color: #0056b3;
    }


/* ✅ Chat Popup Box */
.chat-container {
    display: none; /* Hidden by default */
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 400px;
    background: white;
    border-radius: 12px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    overflow: hidden;
}

/* ✅ Chat Header */
.chat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    background: #8B0000; /* Dark Red */
    color: white;
    font-family: 'Inter', sans-serif;
    font-size: 16px;
}

/* ✅ Chat Body */
.chat-body {
    height: 300px;
    overflow-y: auto;
    padding: 10px;
}


/* ✅ Send Button */
.send-btn {
    background: black;
    border: none;
    color: white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    cursor: pointer;
}

/* ✅ Button beside "Set Up Facial Recognition" */
.custom-red-btn {
    background-color: #8B0000; /* Dark Red */
    color: white;
    border-radius: 8px;
    padding: 10px 15px;
    font-size: 14px;
    cursor: pointer;
    margin-left: 10px;
}

.custom-red-btn:hover {
    background-color: #660000;
}


    </style>

 
</head>



<body>
    
    <!-- Navbar Container -->
    <div id="navbar-container"></div> <!-- The navbar will be injected here -->

<!-- Welcome Section -->
<section class="home" id="home">
    <div class="home-text">
        <h1 id="userName">Hello, User!</h1>
        <h1><b>Welcome to LionBefrienders</b></h1>
        <h4><i>Your trusted companion</i></h4>

        <!-- Buttons Container -->
        <div class="btn-container">
            <button class="btn custom-blue-btn" onclick="setupFacialRecognition()">Set Up Facial Recognition</button>
            <button class="btn custom-red-btn" onclick="openChat()">Chat with LionBee</button>
        </div>
    </div>
</section>


<!-- ✅ Chat Popup -->
<div id="chatPopup" class="chat-container">
    <div class="chat-header">
        <div class="chat-header-content">
            <img src="assets/lionbee.png" alt="LionBee" class="chat-logo">
            <div>
                <h2 class="chat-title">Hi, I'm LionBee.</h2>
                <p class="chat-subtitle">How can I help you today?</p>
            </div>
        </div>
        <button class="close-btn" onclick="closeChat()">✖</button>
        <button class="expand-btn" onclick="toggleExpand()">
            <i class="fas fa-expand"></i> <!-- Expand icon -->
        </button>
        
    </div>

    <div class="chat-body">
        <div id="chatMessages"></div>
    </div>

    <div class="chat-input">
        <!-- ✅ Language Selection -->
        <select id="languageSelector">
            <option value="en-US">EN</option>
            <option value="zh-CN">中文</option>
            <option value="ms-MY">Malay</option>
        <option value="ta-IN">தமிழ்</option>
        </select>
        <!-- ✅ Voice Button -->
        <button class="voice-btn" onclick="startVoiceRecognition()">
            <i class="fas fa-microphone"></i>
        </button>
    
        <!-- ✅ Input Field -->
        <input type="text" id="userMessage" placeholder="Type a message..." onkeypress="handleKeyPress(event)">
    
        <!-- ✅ Send Button -->
        <button class="send-btn" onclick="sendMessage()">➤</button>
    </div>
    
</div>




<style>
    /* ✅ Header Styling */
    .chat-header {
    text-align: center;
    padding: 20px;
}

.chat-logo {
    width: 150px; /* ✅ Bigger logo */
    height: auto;
    margin-bottom: 10px;
}
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&family=Inter:wght@400;500;600&display=swap');

/* ✅ Set OpenAI-Style Font */
body {
    font-family: 'Manrope', sans-serif;
    background-color: #f7f7f8;
}
/* ✅ OpenAI Font for Chat Header */
.chat-title {
    font-family: 'Inter', sans-serif;
    font-size: 22px;
    font-weight: 600; /* Bold */
}

.chat-subtitle {
    font-family: 'Inter', sans-serif;
    font-size: 16px;
    font-weight: 400; /* Normal */
    color: #555;
}


/* ✅ Ensure Chatbox is Visible & Sized Correctly */
.chat-container {
    display: none; /* Hide by default */
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 450px; /* ✅ Increase width */
    height: 550px; /* ✅ Increase height */
    background: white;
    border-radius: 15px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    border: 2px solid #8B0000; /* Dark Red */
    z-index: 1000;
}

/* ✅ Chat Header - Ensures Proper Spacing */
.chat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    background: #8B0000; /* Dark Red */
    color: white;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    border-radius: 25px;
}

.expand-btn {
    background: none;
    border: none;
    color: white;
    font-size: 18px;
    cursor: pointer;
    margin-left: 10px;
}

.expand-btn:hover {
    color: #ddd; /* Light gray on hover */
}

/* ✅ Smooth transition to prevent instant jumps */
#chatPopup {
    transition: all 0.3s ease-in-out;
    max-width: 90vw; /* Prevents it from getting too big */
    max-height: 90vh; /* Prevents it from covering the whole screen */
}

/* ✅ Expanded chat style */
#chatPopup.expanded {
    width: 800px !important;
    height: 900px !important;
}

/* ✅ Ensure input field & chat area resize correctly */
.chat-body {
    flex-grow: 1; 
    overflow-y: auto; 
    transition: all 0.3s ease-in-out;
}

/* ✅ Prevent input field from getting squeezed */
.chat-input {
    display: flex;
    align-items: center;
    gap: 10px; /* Prevents input from shrinking */
    padding: 12px;
}

/* ✅ Fix Chat Header Content */
.chat-header-content {
    display: flex;
    align-items: center;
    gap: 10px; /* ✅ Prevents overlap */
}

/* ✅ Chat Logo */
.chat-logo {
    width: 50px;
    height: auto;
}

/* ✅ Ensure Chat Subtitle is White */
.chat-subtitle {
    font-size: 12px;
    margin: 0;
    color: white; /* ✅ FIXED */
}

/* ✅ Ensure Chat Body Covers Full Width */
.chat-body {
    height: 350px;
    overflow-y: auto;
    padding: 5px;
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* Default alignment */
}
/* ✅ Fix Chat Input Layout */
.chat-input {
    display: flex;
    align-items: center;
    padding: 10px;
    background: white;
    border-top: 1px solid #ddd;
    width: 100%;
    justify-content: space-between; /* Distributes space */
    font-family: 'Inter', sans-serif;
    position:relative;
    flex-shrink: 0;
    height: 60px;
}

/* ✅ Language Dropdown */
#languageSelector {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
    margin-right: 8px; /* Add spacing */
}

/* ✅ Voice Button (Mic) */
.voice-btn {
    background: #8B0000;
    border: none;
    color: white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    cursor: pointer;
    margin-right: 8px; /* Prevents squeezing */
}

/* ✅ Input Field - Auto Adjust Width */
.chat-input input {
    flex-grow: 1; /* Allows input to take remaining space */
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 20px;
    background: #F1F1F1;
    font-size: 12px;
    margin-right: 8px;
}

/* ✅ Send Button - Keep Round & Separate */
.send-btn {
    background: #8B0000;
    border: none;
    color: white;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    cursor: pointer;
}



/* ✅ Improve Bot Message Styling */
.bot-message {
    background: #FFF3F3;
    color: black;
    padding: 12px 15px; /* ✅ Add spacing */
    border-radius: 15px;
    margin: 8px;
    max-width: 85%; /* ✅ Keep consistent width */
    align-self: flex-start;
    text-align: left;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    line-height: 1.6; /* ✅ Improve readability */
    word-wrap: break-word;
    white-space: pre-line; /* ✅ Preserve new lines */
    border: 1px solid #ddd;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); /* ✅ Adds depth */
}

/* ✅ Improve User Message Styling */
.user-message {
    background: #E5E5EA;
    color: black;
    padding: 12px 15px;
    border-radius: 15px;
    margin: 8px;
    max-width: 85%;
    align-self: flex-end;
    text-align: left;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    line-height: 1.6;
    word-wrap: break-word;
    white-space: pre-line;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2); /* ✅ Adds depth */
}

/* ✅ Fix Close Button */
.close-btn {
    background: none;
    border: none;
    font-size: 16px;
    color: rgb(0, 0, 0);
    cursor: pointer;
}





/* ✅ Button beside "Set Up Facial Recognition" */
.custom-red-btn {
    background-color: #8B0000; /* Dark Red */
    color: white;
    border-radius: 8px;
    padding: 10px 15px;
    font-size: 14px;
    cursor: pointer;
    margin-left: 10px;
}

.custom-red-btn:hover {
    background-color: #660000;
}


/* ✅ Chat Messages */
#chatbox {
    display: flex;
    flex-direction: column;
    height: 500px;
    overflow-y: auto;
    padding: 15px;
}

/* ✅ Chat Bubbles */
.message {
    max-width: 75%;
    padding: 12px;
    border-radius: 15px;
    font-size: 16px;
    line-height: 1.6;
    word-wrap: break-word;
    margin: 8px 0;
}

/* ✅ User Messages (Right Side) */
.user {
    background: #007bff;
    color: white;
    align-self: flex-end;
    border-radius: 15px 15px 0 15px;
}

/* ✅ Chatbot Messages (Left Side) */
.bot {
    background: white;
    color: black;
    align-self: flex-start;
    border-radius: 15px 15px 15px 0;
    border: 1px solid #ddd;
}

/* ✅ OpenAI-Style Input Container */
.input-container {
    display: flex;
    align-items: center;
    padding: 10px;
    border-radius: 12px;
    background: white;
    border: 1px solid #ddd;
    margin-top: 10px;
}

/* ✅ Input Field */
#userInput {
    flex-grow: 1;
    padding: 12px;
    border: none;
    font-size: 16px;
    outline: none;
    background: transparent;
}

/* ✅ Updated Send Button */
.send-btn {
    width: 45px;
    height: 45px;
    background: #8B0000; /* Dark Red (Matches LionBee Mascot) */
    color: white;
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.3s ease;
    font-size: 18px;
}

/* ✅ Hover Effect */
.send-btn:hover {
    background: #660000; /* Slightly darker red on hover */
}

/* ✅ Send Button Icon */
.send-btn i {
    font-size: 16px;
}

/* ✅ Input Box */
.input-container {
    display: flex;
    align-items: center;
    padding: 12px;
    border-radius: 12px;
    background: white;
    border: 1px solid #ddd;
    margin-top: 10px;
}

/* ✅ Input Field */
#userInput {
    flex-grow: 1;
    padding: 12px;
    border: none;
    font-size: 16px;
    outline: none;
    background: transparent;
}

/* ✅ OpenAI-Style Small Buttons */
.icon-btn {
    background: #f3f3f3;
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
    margin-right: 5px;
}

.icon-btn i {
    font-size: 14px;
}


</style>

<!-- ✅ OpenAI-Style Chat UI -->
<section class="chat-container">
    <div id="chatbox">
        <div id="messages"></div>
    </div>
    
    <!-- Input Box Like OpenAI -->
    <div class="chat-input">
        <!-- ✅ Language Dropdown (Aligned Left) -->
        <select id="languageSelector">
            <option value="en-US">English</option>
            <option value="zh-CN">中文 (Chinese)</option>
        </select>
    
        <!-- ✅ Voice Button (Mic) -->
        <button class="voice-btn" onclick="startVoiceRecognition()">
            <i class="fas fa-microphone"></i>
        </button>
    
        <!-- ✅ Input Field -->
        <input type="text" id="userMessage" placeholder="Type a message..." onkeypress="handleKeyPress(event)">
    
        <!-- ✅ Send Button -->
        <button class="send-btn" onclick="sendMessage()">➤</button>
    </div>
    
    
</section>


<!-- ✅ Styling Fix -->
<style>
    /* Restore Chatbox */
    .chat-container {
        max-width: 600px;
        margin: 20px auto;
        padding: 15px;
        border-radius: 15px;
        background-color: white;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    /* Chatbox */
    #chatbox {
        display: flex;
        flex-direction: column;
        height: 450px;
        overflow-y: auto;
        border-radius: 10px;
        padding: 10px;
        background: white;
        border: 1px solid #ddd;
    }

    /* ✅ Chat Bubble Fix */
    .message {
        max-width: 80%;
        padding: 12px;
        border-radius: 12px;
        margin-bottom: 8px;
        font-size: 16px;
        line-height: 1.7;
        font-weight: 400;
        animation: fadeIn 0.3s ease-in-out;
    }

    .user {
        background: #007bff;
        color: white;
        align-self: flex-end;
        border-radius: 12px 12px 0 12px;
    }

    .bot {
        background: #f7f7f8;
        color: black;
        align-self: flex-start;
        border-radius: 12px 12px 12px 0;
    }

    /* ✅ Input Box & Button */
    .input-container {
        display: flex;
        padding: 10px;
        border-top: 1px solid #ddd;
    }

    #userInput {
        flex-grow: 1;
        padding: 10px;
        border-radius: 10px;
        outline: none;
        font-size: 16px;
    }

    #sendBtn {
        padding: 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        margin-left: 5px;
    }
</style>




<!-- Scripts -->
<script src="https://cdn.faceio.net/fio.js"></script>

    

<script>
    loadNavbar(); // Load navbar dynamically

    document.addEventListener("DOMContentLoaded", function () {
    const userName = localStorage.getItem('userName') || "unknown-user";
    const userID = localStorage.getItem('userID');
    const jwtToken = localStorage.getItem('jwtToken');

    console.log("🛠️ Retrieved userName from localStorage:", userName);

// ✅ Ensure user is logged in properly
if (userName !== "unknown-user" && jwtToken) {
    const userElement = document.getElementById("userName");
    const storedName = localStorage.getItem('userName') || "Guest"; // Retrieve stored name

    if (userElement) {
        userElement.textContent = `Hello, ${storedName}!`;
    } else {
        console.error("⚠️ Element with ID 'userName' not found in DOM.");
    }
} else {
    alert("⚠️ User not logged in! Redirecting to login.");
    localStorage.clear(); // 🧹 Clear invalid session
    window.location.href = "login.html";
}
});





// Dynamically load the navbar
async function loadNavbar() {
            try {
                const response = await fetch('navbar.html');
                const navbarHTML = await response.text();
                document.getElementById('navbar-container').innerHTML = navbarHTML;
            } catch (error) {
                console.error('Failed to load navbar:', error);
            }
        }

        const faceio = new faceIO("fioab895"); // Replace with your FaceIO public ID

        async function updateFacialId(userID, facialId) {
    try {
        const response = await fetch('http://localhost:8081/api/v1/users/get-email-by-faceid', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ facialID: facialId }) // ✅ Ensure JSON is formatted correctly
        });

        // ✅ Read raw response as text (for debugging)
        const textResponse = await response.text();
        console.log("🔍 Raw Response:", textResponse); // Debugging: Check if the response is valid JSON

        // ✅ Try parsing JSON safely
        let data;
        try {
            data = JSON.parse(textResponse);
        } catch (error) {
            console.error("❌ JSON Parsing Error:", error, textResponse);
            alert("Server returned an invalid response.");
            return;
        }

        // ✅ Check if the request was successful
        if (response.ok && data.email) {
            console.log("✅ Facial ID updated successfully:", data);
        } else {
            console.warn("⚠️ Server response did not contain an email:", data);
        }

    } catch (error) {
        console.error("❌ Error updating facial ID:", error);
    }
}
async function setupFacialRecognition(event) {
    if (event) event.preventDefault();

    const userID = parseInt(localStorage.getItem("userID"), 10); // ✅ Convert userID to number
    const userEmail = localStorage.getItem("userName");

    if (!userID || !userEmail) {
        alert("Please log in to set up facial recognition.");
        return;
    }

    try {
        console.log("🔹 Starting FaceIO Enrollment...");
        const userInfo = await faceio.enroll({
            locale: "auto",
            payload: { 
                userID: userID,
                email: userEmail
            },
        });

        console.log("✅ Enrollment successful:", userInfo);
        alert(`Facial Recognition Set Up Successfully! Facial ID: ${userInfo.facialId}`);

        // ✅ Debugging: Log data before sending API request
        console.log("🔹 Sending Facial Recognition Data:", {
            userID: userID,
            facialID: userInfo.facialId
        });

        // ✅ Send Facial ID & User ID to Backend
        const response = await fetch("http://localhost:8081/api/v1/users/update-facial-id", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                userID: userID,  // ✅ Ensure userID is a number
                facialID: userInfo.facialId
            }),
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error || "Failed to save facial recognition data.");
        }

        console.log("✅ Facial ID updated in the database.");
        alert("Your facial recognition data has been saved!");

    } catch (error) {
        console.error("❌ Facial recognition setup failed:", error);
        alert(`Error: ${error.message || error}`);
    }
}




    </script>

    <section class="about" id="about">
        <h1 class="heading"> <span> About </span> Us </h1>

        <div class="row">
            <div class="video-container">
                <video src="3209763-uhd_3840_2160_25fps.mp4" loop autoplay muted></video>
                <h3>LionBefrienders</h3>
            </div>

            <div class="content">
                <div id="headerWithLottie">
                    <div id="lottieAnimation"></div>
                    <h2>Why Choose Us?</h2>
                    <lottie-player src="https://assets3.lottiefiles.com/temp/lf20_9gY9Yf.json"
                                   background="transparent" speed="0.75" style="width: 50px; height: 50px;" loop autoplay>
                    </lottie-player>
                </div>
                <h2>Welcome to LionBefrienders</h2>
                <p>Lion Befrienders is a Singapore-based non-profit organization dedicated to enhancing the quality of life for vulnerable seniors. They aim to alleviate loneliness and isolation among the elderly by fostering meaningful social connections and promoting active aging. Through their various programs and initiatives, such as home visits, wellness activities, and community engagement, Lion Befrienders provides emotional support, companionship, and assistance to seniors in need. Their mission is to empower the elderly to age with dignity while fostering a caring and inclusive society
                    
                    </p>
                <a href="#" class="btns">Learn More</a>
            </div>
        </div>
        </div>
    </section>
    <!-- about section ends -->
   

    <section class="newsletter">

        <form onsubmit="sendNews(); reset(); return false;">
            <h3>Subscribe For Latest News</h3>
            <input type="email" id="newsEmail" placeholder="Enter Your Email" class="box">
            <input type="submit" value="Subscribe" class="btns">
        </form>

    </section>

    <!--- Contact us --->
    <section class="contact" id="contact">

        <h1 class="contactheadings"> Contact Us </h1>

        <div class="row">
            <iframe class=map src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.738442084811!2d103.77336167496571!3d1.3330862986542762!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31da107d8eb4e359%3A0x75d2e7ffdeeb0c43!2sNgee%20Ann%20Polytechnic!5e0!3m2!1sen!2ssg!4v1733395568829!5m2!1sen!2ssg" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
           
            <form onsubmit="sendEmail(); reset(); return false;">
                <h3>Message Us</h3>
                <input type="text" id="name" placeholder="Enter Name" class="box" required>
                <input type="email" id="email" placeholder="Enter Email" class="box" required>
                <input type="text" id="subject" placeholder="Enter Subject" class="box" required>
                <textarea id="message" placeholder="Enter Message" class="box" cols="30" rows="10" required></textarea>
                <input type="submit" value="Send Message" class="btn">
            </form>
        </div>
    </section>

    <!-- Footer section starts  -->
    <section class="footer">

        <div class="box-container">

            <div class="box">
                <h3>Quick Links</h3>
                <a href="#home">Home</a>
                <a href="#about">About Us</a>
                <a href="#contact">Contact Us</a>
            </div>

            <div class="box">
                <h3>Extra Links</h3>
            </div>

            <div class="box">
                <h3>Locations</h3>
                <a href="#">Singapore</a>
            </div>

            <div class="box">
                <h3>Contact Info</h3>
                <a href="#">+65 91234567</a>
                <a href="#">LionBefrienders@gmail.com</a>
                <a href="#">Singapore</a>
                <img src="images/payment.png" alt="">
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="inner-footer">
            <div class="social-links">
                <ul>
                    <li class="social-items"><a href=""><i class="fab fa-facebook"></i></a></li>
                    <li class="social-items"><a href=""><i class="fab fa-instagram"></i></a></li>
                    <li class="social-items"><a href=""><i class="fab fa-twitter"></i></a></li>
                    <li class="social-items"><a href=""><i class="fab fa-youtube"></i></a></li>
                </ul>
            </div>
        </div>
        <div class="outer-footer">
            Copyright &copy; LionBefrienders PTE LTD
        </div>
    </footer>
    <!-- Footer section ends -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/js/bootstrap.bundle.min.js"></script>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <script>
        loadNavbar();  // Load navbar dynamically
    

    
        window.onload = function() {
    const userEmail = localStorage.getItem('userEmail');
    const jwtToken = localStorage.getItem('jwtToken'); 

// ✅ Ensure user is logged in properly
if (userName !== "unknown-user" && jwtToken) {
    const userElement = document.getElementById("userName");
    const storedName = localStorage.getItem('userName') || "Guest"; // Retrieve stored name

    if (userElement) {
        userElement.textContent = `Hello, ${storedName}!`;
    } else {
        console.error("⚠️ Element with ID 'userName' not found in DOM.");
    }
} else {
    alert("⚠️ User not logged in! Redirecting to login.");
    localStorage.clear(); // 🧹 Clear invalid session
    window.location.href = "login.html";
}
};


    
        // Dynamically load the navbar
        async function loadNavbar() {
            try {
                const response = await fetch('navbar.html');
                if (response.ok) {
                    const navbarHTML = await response.text();
                    document.getElementById('navbar-container').innerHTML = navbarHTML;
                } else {
                    console.error("Failed to load navbar: ", response.status, response.statusText);
                }
            } catch (error) {
                console.error('Failed to load navbar:', error);
            }
        }
    
        // Handle header shadow on scroll
        let header = document.querySelector("header");
        window.addEventListener("scroll", () => {
            header.classList.toggle("shadow", window.scrollY > 0);
        });
    
        // Handle navbar menu toggle
        let menu = document.querySelector(".navbar");
        document.querySelector("#menu-icon").onclick = () => {
            menu.classList.toggle("active");
        };
    
        // Remove active shadow on scroll
        window.onscroll = () => {
            menu.classList.remove("active");
        };
    
        // Newsletter subscription function
        function sendNews() {
            Email.send({
                Host: "smtp.elasticemail.com",
                Username: 'vernonkoh123@gmail.com',
                Password: "F3067591595AB4C402CB0B5A3FF33C715A30",
                To: document.getElementById("newsEmail").value,
                From: 'vernonkoh123@gmail.com',
                Subject: "Subscription on Updates of discounts",
                Body: "Email: " + document.getElementById("newsEmail").value
                    + "<br> Message: We will update you on future news. Thanks for Subscribing!!"
            }).then(
                message => alert("Message Sent Successfully")
            );
        }
    
        // Fetch user membership benefits (placeholder function)
        function fetchUserMembershipBenefits() {
            console.log("Fetching user membership benefits...");
            // Add your implementation here
        }
        fetchUserMembershipBenefits();  // Call the function to fetch membership benefits
    </script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    
    <script>
        document.getElementById('sendBtn').addEventListener('click', sendMessage);
        document.getElementById('userInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });
    
        function formatMarkdown(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')  // **bold**
                .replace(/\*(.*?)\*/g, '<i>$1</i>')  // *italic*
                .replace(/\n/g, '<br>');  // New lines
        }
    
        async function sendMessage() {
            const userInput = document.getElementById('userInput').value.trim();
            if (!userInput) return;
    
            const messagesDiv = document.getElementById('messages');
    
            // ✅ Smooth User Message
            messagesDiv.innerHTML += `<div class="message user"><strong>You:</strong> ${userInput}</div>`;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            document.getElementById('userInput').value = '';
    
            try {
                const response = await fetch('http://localhost:8084/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' ,
                                "Authorization": "Bearer YOUR-API-KEY" // 🔥 ADD THIS FOR DEBUGGING
                    },
                    body: JSON.stringify({ message: userInput })
                });
    
                const data = await response.json();
                let botResponse = "Sorry, I didn't understand that.";
                if (data.choices && data.choices.length > 0) {
                    botResponse = formatMarkdown(data.choices[0].message.content);
                }
    
                // ✅ Smooth Bot Message
                messagesDiv.innerHTML += `<div class="message bot"><strong>LionBefrienders AI:</strong> ${botResponse}</div>`;
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            } catch (error) {
                console.error('Error:', error);
                messagesDiv.innerHTML += `<div class="message bot"><strong>LionBefrienders AI:</strong> Error fetching response.</div>`;
            }
        }




// ✅ Show Chat Popup
function openChat() {
    const chatPopup = document.getElementById("chatPopup");
    chatPopup.style.display = "block";
    chatPopup.style.opacity = 0;
    setTimeout(() => {
        chatPopup.style.opacity = 1;
    }, 100);
}

// ✅ Hide Chat Popup
function closeChat() {
    const chatPopup = document.getElementById("chatPopup");
    chatPopup.style.opacity = 0;
    setTimeout(() => {
        chatPopup.style.display = "none";
    }, 200);
}

// ✅ Handle Enter Key (Fix for "Press Enter Doesn't Work")
function handleKeyPress(event) {
    if (event.key === "Enter") {
        sendMessage();
    }
}
    // ✅ Global Variable
    var markdownConverter;

    // ✅ Ensure Showdown is loaded before using
document.addEventListener("DOMContentLoaded", function () {
    if (typeof showdown !== "undefined") {
        console.log("✅ Showdown.js Loaded Successfully!");
        window.markdownConverter = new showdown.Converter();
    } else {
        console.error("❌ Showdown.js failed to load.");
    }
});

// ✅ Fix formatBotResponse function
function formatBotResponse(response) {
    if (!markdownConverter) {
        console.warn("⚠️ markdownConverter is not initialized yet.");
        return response; // Return raw response instead of breaking
    }

    try {
        return markdownConverter.makeHtml(response);
    } catch (error) {
        console.error("❌ Markdown conversion error:", error);
        return response; // Fallback to raw response
    }
}


// ✅ Ensure Chat Messages Display Correctly
function sendMessage() {
    const userMessage = document.getElementById("userMessage").value.trim();
    if (!userMessage) return;

    let chatBody = document.querySelector(".chat-body");

    // ✅ Append User Message (Right-Aligned)
    chatBody.innerHTML += `<div class="user-message">${userMessage}</div>`;
    chatBody.scrollTop = chatBody.scrollHeight;
    document.getElementById("userMessage").value = "";

    // ✅ Send message to backend
    fetch("http://localhost:8084/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: userMessage }),
    })
    .then(response => response.json())
    .then(data => {
        let botMessage = formatBotResponse(data.choices[0].message.content || "Sorry, I couldn't understand that.");
        chatBody.innerHTML += `<div class="bot-message">${botMessage}</div>`;
        chatBody.scrollTop = chatBody.scrollHeight;
    })
    .catch(error => {
        console.error("Error:", error);
        chatBody.innerHTML += `<div class="bot-message">Oops! Something went wrong.</div>`;
    });
}

function toggleExpand() {
    const chatContainer = document.getElementById("chatPopup");
    const expandBtn = document.querySelector(".expand-btn i");

    chatContainer.classList.toggle("expanded");

    if (chatContainer.classList.contains("expanded")) {
        expandBtn.classList.remove("fa-expand");
        expandBtn.classList.add("fa-compress"); // Show collapse icon
    } else {
        expandBtn.classList.remove("fa-compress");
        expandBtn.classList.add("fa-expand"); // Show expand icon
    }
}



// ✅ Voice Recognition Function (Supports English, Chinese, Malay and Tamil)
function startVoiceRecognition() {
    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        alert("Your browser doesn't support speech recognition. Please use Google Chrome.");
        return;
    }

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    
    // ✅ Get selected language from dropdown
    const selectedLang = document.getElementById("languageSelector").value;
    recognition.lang = selectedLang;

    recognition.start();

    recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById("userMessage").value = transcript; // ✅ Fill input with voice text
    };

    recognition.onerror = function(event) {
        console.error("Speech recognition error", event);
        alert("Error with speech recognition. Try again.");
    };
}


    </script>
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

    
</body>
</html>